<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Lab 4 - Execution Context</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      background: #f9f9f9;
    }

    h1,
    h2 {
      text-align: center;
      color: #2e7d32;
    }

    .section {
      margin-bottom: 3rem;
    }

    .code-block,
    .output-block,
    .env-block {
      background-color: #f4f4f4;
      padding: 1rem;
      border-left: 5px solid #4caf50;
      font-family: monospace;
      white-space: pre-wrap;
      margin: 1rem 0;
    }

    .env-block {
      background-color: #f3f4f6;
      padding: 15px;
      border-radius: 8px;
      line-height: 1.6;
      font-family: 'Courier New', monospace;
    }

    .env-block ol {
      padding-left: 20px;
    }

    .env-block code {
      background-color: #e5e7eb;
      padding: 2px 5px;
      border-radius: 4px;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <h1>Lab 4 - Execution Context</h1>

  <div class="section">
    <h2>Code 1</h2>
    <div class="code-block">
      <pre><code>
        let x;
        var a = 5;
        var b = 10;
        var c = function (a, b, c) {
          document.write(x);
          document.write(a);
          var f = function (a, b, c) {
            b = a;
            document.write(b);
            b = c;
            var x = 5;
          };
          f(a, b, c);
          document.write(b);
          var x = 10;
        };
        c(8, 9, 10);
        document.write(b);
        document.write(x);
      </code></pre>
    </div>

    <h3>1.What will be printed in strict mode:</h3>
    <div class="output-block">
      undefined
      8
      8
      9
      10
      undefined
    </div>

    <h3>Lexical Environment:</h3>
    <div class="env-block">
      <p><strong>1. Global EC Creation:</strong><br>
        Outer: null<br>
        LE: { a: undefined, b: undefined, c: undefined }<br>
        TDZ: { x }</p>

      <p><strong>2. Global EC Execution:</strong><br>
        Outer: null<br>
        LE: { a: 5, b: 10, c: fn, x: undefined }<br>
        Call c(8,9,10)<br>
        Output: <code>x: undefined</code>, <code>a: 8</code></p>

      <p><strong>3. C FEC Creation:</strong><br>
        Outer: global<br>
        LE: { arguments: obj, a: 8, b: 9, c: 10, f: undefined， x: undefined }<br>
        TDZ: { }</p>

      <p><strong>4. C FEC Execution:</strong><br>
        Outer: global<br>
        LE: { arguments: obj, a: 8, b: 9, c: 10, f: fn, x: 10 }<br>
        Call f(a,b,c)<br>
        Output: <code>b: 8</code>, <code>b: 9</code></p>

      <p><strong>5. F FEC Creation:</strong><br>
        Outer: C<br>
        LE: { arguments: obj, a: 8, b: 9, c: 10, x: undefined }<br>
        TDZ: { }</p>

      <p><strong>6. F FEC Execution:</strong><br>
        Outer: C<br>
        LE: { arguments: obj, b: 10, x: 5 }<br>
        Output (from inner function f): b: 8, then b: 9</p>
    </div>

  </div>

  <div class="section">
    <h2>Code 2</h2>
    <div class="code-block">
      <pre><code>
        var x = 9;
        function myFunction() {
          return x * x;
        }
        document.write(myFunction());
        x = 5;
        document.write(myFunction());
      </code></pre>
    </div>

    <h3>2. What will be printed in strict mode:</h3>
    <pre class="output-block">
    81
    25
    </pre>

    <h3>Lexical Environment:</h3>
    <div class="env-block">
      <p><strong>1. Global EC creation:</strong><br>
        • Outer: null,<br>
        • LE: { x: undefined, myFunction: fn }<br>
        • TDZ: {}</p>

      <p><strong>2. Global EC execution:</strong><br>
        • Outer: null,<br>
        • LE: { x: 9 },<br>
        • call myFunction, output: [81],<br>
        • x = 5,<br>
        • call myFunction, output: [25]<br>
        • TDZ: {}</p>

      <p><strong>3. myFunction FEC creation (first call):</strong><br>
        • Outer: global,<br>
        • LE: { arguments: obj }<br>
        • TDZ: {}</p>

      <p><strong>4. myFunction FEC execution (first call):</strong><br>
        • Outer: global,<br>
        • LE: { arguments: obj }<br>
        • TDZ: {}</p>

      <p><strong>5. myFunction FEC creation (second call):</strong><br>
        • Outer: global,<br>
        • LE: { arguments: obj }<br>
        • TDZ: {}</p>

      <p><strong>6. myFunction FEC execution (second call):</strong><br>
        • Outer: global,<br>
        • LE: { arguments: obj }<br>
        • TDZ: {}</p>
    </div>

  </div>

  <div class="section">
    <h2>Code 3</h2>
    <div class="code-block">
      <pre><code>
  var foo = 1;
  function bar() {
      if (!foo) {
          var foo = 10;
      }
      alert(foo);
  }
  bar();
  </code></pre>
    </div>

    <h3>What will be printed in strict mode:</h3>
    <div class="output-block">
      10 (via alert)
    </div>

    <h3>Lexical Environment:</h3>
    <div class="env-block">
      <p><strong>1. Global EC creation:</strong><br>
        • Outer: null,<br>
        • LE: {{ foo: undefined, bar: fn }}<br>
        • TDZ: {{ }}</p>

      <p><strong>2. Global EC execution:</strong><br>
        • Outer: null,<br>
        • LE: {{ foo: 1 }}<br>
        • call bar<br>
        • TDZ: {{ }}</p>

      <p><strong>3. bar FEC creation:</strong><br>
        • Outer: global,<br>
        • LE: {{ arguments: obj, foo: undefined }}<br>
        • TDZ: {{ }}</p>

      <p><strong>4. bar FEC execution:</strong><br>
        • Outer: global,<br>
        • LE: {{ arguments: obj, foo: 10 }}, output[10]<br>
        • TDZ: {{ }}</p>
    </div>
  </div>


</body>

</html>