<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Lab 4 - Execution Context</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 40px;
      background: #f2f4f8;
      color: #333;
    }

    h1 {
      text-align: center;
      color: #2e7d32;
      font-size: 2em;
      margin-bottom: 1.5em;
    }

    h2 {
      text-align: center;
      color: #388e3c;
      margin-bottom: 1em;
    }

    h3 {
      color: #2e7d32;
      margin-top: 2rem;
      margin-bottom: 0.5rem;
    }

    .section {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      padding: 2rem;
      margin-bottom: 3rem;
    }

    .code-block,
    .output-block {
      background-color: #f4f6f8;
      border-left: 5px solid #4caf50;
      padding: 1rem;
      font-family: 'Courier New', monospace;
      white-space: pre-wrap;
      overflow-x: auto;
      margin-top: 0.5rem;
      margin-bottom: 2rem;
    }

    .env-block {
      background-color: #eef1f5;
      border-left: 5px solid #81c784;
      border-radius: 6px;
      padding: 1.2rem;
      font-family: 'Courier New', monospace;
      line-height: 1.6;
    }

    .env-block p {
      margin-bottom: 1.2rem;
    }

    .env-block code {
      background-color: #dcedc8;
      padding: 2px 5px;
      border-radius: 4px;
      font-weight: bold;
    }

    pre {
      margin: 0;
    }
  </style>
</head>

<body>
  <h1>Lab 4 - Execution Context</h1>

  <!-- Code 1 -->
  <div class="section">
    <h2>Code 1</h2>
    <div class="code-block">
      <pre><code>let x;
var a = 5;
var b = 10;
var c = function (a, b, c) {
  document.write(x);      // prints undefined
  document.write(a);      // prints 8
  var f = function (a, b, c) {
    b = a;
    document.write(b);    // prints 8
    b = c;
    var x = 5;
  };
  f(a, b, c);
  document.write(b);      // prints 9
  var x = 10;
};
c(8, 9, 10);
document.write(b);        // prints 10
document.write(x);        // prints undefined</code></pre>
    </div>

    <h3>1. What will be printed in strict mode:</h3>
    <div class="output-block">
      undefined
      8
      8
      9
      10
      undefined
    </div>

    <h3>Lexical Environment:</h3>
    <div class="env-block">
      <p><strong>1. Global EC Creation:</strong><br>
        Outer: null<br>
        LE: { a: undefined, b: undefined, c: undefined }<br>
        TDZ: { x }</p>

      <p><strong>2. Global EC Execution:</strong><br>
        Outer: null<br>
        LE: { a: 5, b: 10, c: fn, x: undefined }<br>
        Call c(8,9,10)<br>
        Output: <code>x: undefined</code>, <code>a: 8</code></p>

      <p><strong>3. C FEC Creation:</strong><br>
        Outer: global<br>
        LE: { arguments: obj, a: 8, b: 9, c: 10, f: undefined, x: undefined }<br>
        TDZ: { }</p>

      <p><strong>4. C FEC Execution:</strong><br>
        Outer: global<br>
        LE: { arguments: obj, a: 8, b: 9, c: 10, f: fn, x: 10 }<br>
        Call f(a,b,c)<br>
        Output: <code>b: 8</code>, <code>b: 9</code></p>

      <p><strong>5. F FEC Creation:</strong><br>
        Outer: C<br>
        LE: { arguments: obj, a: 8, b: 9, c: 10, x: undefined }<br>
        TDZ: { }</p>

      <p><strong>6. F FEC Execution:</strong><br>
        Outer: C<br>
        LE: { arguments: obj, b: 10, x: 5 }<br>
        Output (from inner function f): b: 8, then b: 9</p>
    </div>
  </div>

  <!-- Code 2 -->
  <div class="section">
    <h2>Code 2</h2>
    <div class="code-block">
      <pre><code>var x = 9;
function myFunction() {
  return x * x;          // returns current x squared
}
document.write(myFunction());  // prints 81
x = 5;
document.write(myFunction());  // prints 25</code></pre>
    </div>

    <h3>2. What will be printed in strict mode:</h3>
    <div class="output-block">
      81
      25
    </div>

    <h3>Lexical Environment:</h3>
    <div class="env-block">
      <p><strong>1. Global EC creation:</strong><br>
        Outer: null<br>
        LE: { x: undefined, myFunction: fn }<br>
        TDZ: {}</p>

      <p><strong>2. Global EC execution:</strong><br>
        Outer: null<br>
        LE: { x: 9 },<br>
        call myFunction, output: [81],<br>
        x = 5,<br>
        call myFunction, output: [25]<br>
        TDZ: {}</p>

      <p><strong>3. myFunction FEC creation (first call):</strong><br>
        Outer: global<br>
        LE: { arguments: obj }<br>
        TDZ: {}</p>

      <p><strong>4. myFunction FEC execution (first call):</strong><br>
        Outer: global<br>
        LE: { arguments: obj }<br>
        TDZ: {}</p>

      <p><strong>5. myFunction FEC creation (second call):</strong><br>
        Outer: global<br>
        LE: { arguments: obj }<br>
        TDZ: {}</p>

      <p><strong>6. myFunction FEC execution (second call):</strong><br>
        Outer: global<br>
        LE: { arguments: obj }<br>
        TDZ: {}</p>
    </div>
  </div>

  <!-- Code 3 -->
  <div class="section">
    <h2>Code 3</h2>
    <div class="code-block">
      <pre><code>var foo = 1;
function bar() {
    if (!foo) {
        var foo = 10;
    }
    alert(foo);           // prints 10
}
bar();</code></pre>
    </div>

    <h3>3. What will be printed in strict mode:</h3>
    <div class="output-block">
      10 (via alert)
    </div>

    <h3>Lexical Environment:</h3>
    <div class="env-block">
      <p><strong>1. Global EC creation:</strong><br>
        Outer: null<br>
        LE: { foo: undefined, bar: fn }<br>
        TDZ: {}</p>

      <p><strong>2. Global EC execution:</strong><br>
        Outer: null<br>
        LE: { foo: 1 },<br>
        call bar<br>
        TDZ: {}</p>

      <p><strong>3. bar FEC creation:</strong><br>
        Outer: global<br>
        LE: { arguments: obj, foo: undefined }<br>
        TDZ: {}</p>

      <p><strong>4. bar FEC execution:</strong><br>
        Outer: global<br>
        LE: { arguments: obj, foo: 10 }<br>
        Output: 10<br>
        TDZ: {}</p>
    </div>
  </div>

</body>

</html>